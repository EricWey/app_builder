<view class="container">
  <!-- è¡¨å•è¾“å…¥åŒº (70%) -->
  <view class="form-section">
    <view class="form-item">
      <text class="label">ç±»åˆ«ï¼š</text>
      <picker mode="selector" range="{{categories}}" range-key="name" bindchange="onCategoryChange">
        <view class="picker">{{currentCategory.name || 'è¯·é€‰æ‹©ç±»åˆ«'}}</view>
      </picker>
      <input 
        type="text" 
        placeholder="è‡ªå®šä¹‰ç±»åˆ«" 
        bindinput="onCustomCategoryInput"
        class="custom-input"
        wx:if="{{showCustomInput}}"
      />
      <text class="toggle-custom" bindtap="toggleCustomInput">
        {{showCustomInput ? 'é€‰æ‹©é¢„è®¾' : 'è‡ªå®šä¹‰+'}}
      </text>
    </view>

    <view class="form-item">
      <text class="label">æ—¥æœŸï¼š</text>
      <picker mode="date" fields="day" start="2023-01-01" end="2026-12-31" bindchange="onDateChange">
        <view class="picker">{{selectedDate || 'é€‰æ‹©æ—¥æœŸ'}}</view>
      </picker>
    </view>

    <view class="form-item">
      <text class="label">é€šçŸ¥å†…å®¹ï¼š</text>
      <textarea 
        placeholder="è¾“å…¥é€šçŸ¥å†…å®¹..." 
        bindinput="onContentInput"
        class="content-input"
        auto-height
      />
    </view>

    <button type="primary" bindtap="submitForm" class="submit-btn">æäº¤</button>
  </view>

  <!-- è§£æé¢„è§ˆåŒº (30%) -->
  <view class="preview-section">
    <text class="section-title">è§£æé¢„è§ˆ</text>
    <view class="preview-content">
      <view wx:if="{{parsedData.type === 'å½“æ—¥ä½œä¸š'}}">
        <text class="preview-title">ğŸ“š ä½œä¸šé€šçŸ¥</text>
        <text>å­¦ç§‘: {{parsedData.extractedFields.subject || 'æœªè¯†åˆ«'}}\n</text>
        <text>å†…å®¹: {{parsedData.extractedFields.content}}\n</text>
        <text>æäº¤æ—¶é—´: {{parsedData.extractedFields.deadline || 'æœªæŒ‡å®š'}}</text>
      </view>
      
      <view wx:elif="{{parsedData.type === 'é™æœŸä»»åŠ¡'}}">
        <text class="preview-title">â° é™æœŸä»»åŠ¡</text>
        <text>ä»»åŠ¡: {{parsedData.extractedFields.taskName || 'æœªè¯†åˆ«'}}\n</text>
        <text>æˆªæ­¢: {{parsedData.extractedFields.deadline || 'æœªæŒ‡å®š'}}\n</text>
        <text>è¯¦æƒ…: {{parsedData.extractedFields.content}}</text>
      </view>
      
      <view wx:elif="{{parsedData.type === 'æ´»åŠ¨é€šçŸ¥'}}">
        <text class="preview-title">ğŸ¯ æ´»åŠ¨é€šçŸ¥</text>
        <text>æ´»åŠ¨: {{parsedData.extractedFields.activityName || 'æœªè¯†åˆ«'}}\n</text>
        <text>æ—¶é—´: {{parsedData.extractedFields.time || 'æœªæŒ‡å®š'}}\n</text>
        <text>åœ°ç‚¹: {{parsedData.extractedFields.location || 'æœªæŒ‡å®š'}}\n</text>
        <text wx:if="{{parsedData.extractedFields.notes}}">å¤‡æ³¨: {{parsedData.extractedFields.notes}}</text>
      </view>
      
      <view wx:else>
        <text wx:if="{{parsedData.subject}}">ç±»åˆ«: {{parsedData.subject}}\n</text>
        <text wx:if="{{parsedData.date}}">æ—¥æœŸ: {{parsedData.date}}\n</text>
        <text>{{parsedData.content || 'è¾“å…¥å†…å®¹åè‡ªåŠ¨è§£æ...'}}</text>
      </view>
    </view>
  </view>
</view>